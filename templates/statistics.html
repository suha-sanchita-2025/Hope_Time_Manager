{% extends "base.html" %}
{% block content %}

<script>
    if (localStorage.getItem('theme') === 'dark') {
        document.documentElement.classList.add('dark');
    }
</script>
<script src="https://cdn.tailwindcss.com"></script>
<script>
    tailwind.config = { darkMode: 'class' };
</script>


<div class="w-full ml-96 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 min-h-[700px] mt-10">
    <h2 class="text-xl font-bold mb-4 text-center dark:text-white">Statistics</h2>
    <div class="flex flex-row gap-16 justify-center items-center">
        <div class="w-96 h-96 flex items-center justify-center bg-purple-50 rounded shadow">
            <div>
                <h3 class="text-center font-semibold mb-2">Tasks by Category</h3>
                <canvas id="categoryPieChart" width="350" height="350"></canvas>
            </div>
        </div>
        <div class="w-96 h-96 flex items-center justify-center bg-purple-50 rounded shadow">
            <div>
                <h3 class="text-center font-semibold mb-2">Completed vs Incomplete Tasks</h3>
                <canvas id="completionDonutChart" width="350" height="350"></canvas>
            </div>
        </div>
        <div class="w-96 h-96 flex items-center justify-center bg-purple-50 rounded shadow">
            <div>
                <h3 class="text-center font-semibold mb-2">Tasks per Category (Completed/Incomplete)</h3>
                <canvas id="categoryBarChart" width="350" height="350"></canvas>
            </div>
        </div>
    </div>
</div>

<script>

    const categories = {{ categories|tojson }};
    const tasksByCategory = {{ tasks_by_category|tojson }};
    const completed = {{ completed }};
    const incomplete = {{ incomplete }};
    const barCompleted = {{ bar_completed|tojson }};
    const barIncomplete = {{ bar_incomplete|tojson }};
</script>
<script src="../static/statistics.js"></script>
{% endblock %}